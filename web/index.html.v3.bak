<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Security Camera Monitor</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üîí Security Camera Monitor</h1>
            <div class="status-indicator">
                <span class="status-dot" id="statusDot"></span>
                <span id="statusText">Initializing...</span>
            </div>
        </header>

        <!-- Main Controls -->
        <section class="controls-section">
            <h2>System Controls</h2>
            <div class="button-row">
                <button id="startMonitoring" class="btn btn-success">‚ñ∂ Start Monitoring</button>
                <button id="stopMonitoring" class="btn btn-danger" disabled>‚èπ Stop Monitoring</button>
                <button id="startRecording" class="btn btn-primary">‚è∫ Manual Record</button>
                <button id="stopRecording" class="btn btn-warning" disabled>‚èπ Stop Recording</button>
            </div>
        </section>

        <!-- Status Display -->
        <section class="status-section">
            <h2>Current Status</h2>
            <div class="info-grid">
                <div class="info-card">
                    <span class="info-label">Monitoring:</span>
                    <span id="monitoringStatus" class="info-value">‚Äî</span>
                </div>
                <div class="info-card">
                    <span class="info-label">Recording:</span>
                    <span id="recordingStatus" class="info-value">‚Äî</span>
                </div>
                <div class="info-card">
                    <span class="info-label">Motion Detected:</span>
                    <span id="motionStatus" class="info-value">‚Äî</span>
                </div>
                <div class="info-card">
                    <span class="info-label">Last Motion:</span>
                    <span id="lastMotion" class="info-value">‚Äî</span>
                </div>
            </div>
        </section>

        <!-- Configuration -->
        <section class="config-section">
            <h2>‚öôÔ∏è Settings</h2>
            
            <!-- Camera Settings -->
            <div class="camera-settings-group">
                <h3>üì∑ Camera Settings</h3>
                <button id="openCameraSettings" class="btn btn-primary">‚öôÔ∏è Adjust Camera Settings</button>
            </div>

            <!-- Motion Detection Settings -->
            <div class="settings-grid">
                <div class="setting-group">
                    <label>
                        <input type="checkbox" id="recordOnMotion" />
                        Record on Motion Detection
                    </label>
                </div>

                <div class="setting-group">
                    <label for="motionThreshold">Motion Threshold (pixels):</label>
                    <input type="number" id="motionThreshold" min="100" max="5000" step="100" />
                </div>

                <div class="setting-group">
                    <label for="motionSensitivity">Motion Sensitivity (0-255):</label>
                    <input type="number" id="motionSensitivity" min="1" max="255" />
                </div>

                <div class="setting-group">
                    <label for="recordingDuration">Recording Duration (seconds):</label>
                    <input type="number" id="recordingDuration" min="5" max="300" />
                </div>

                <div class="setting-group">
                    <button id="saveConfig" class="btn btn-primary">üíæ Save Settings</button>
                </div>
            </div>
        </section>

        <!-- Recent Motion Events --> -->
        <section class="events-section">
            <h2>üìã Recent Motion Events</h2>
            <div class="events-header">
                <button id="refreshEvents" class="btn btn-secondary">üîÑ Refresh</button>
                <span id="eventsCount">0 events</span>
            </div>
            <div id="eventsList" class="events-list">
                <p class="no-data">No motion events recorded</p>
            </div>
        </section>

        <!-- Recordings -->
        <section class="recordings-section">
            <h2>üé¨ Recordings</h2>
            <div class="recordings-header">
                <button id="refreshRecordings" class="btn btn-secondary">üîÑ Refresh</button>
                <span id="recordingsCount">0 recordings</span>
            </div>
            <div id="recordingsList" class="recordings-list">
                <p class="no-data">No recordings available</p>
            </div>
        </section>

        <!-- Detection Regions -->
        <section class="regions-section">
            <h2>üéØ Detection Regions</h2>
            <div class="regions-controls">
                <button id="drawRegions" class="btn btn-primary">‚úèÔ∏è Draw Detection Zones</button>
                <button id="clearRegions" class="btn btn-danger">üóë Clear All Zones</button>
                <label>
                    <input type="checkbox" id="useRegions" />
                    Use Region-Based Detection
                </label>
                <span id="regionsCount">0 regions defined</span>
            </div>
        </section>
    </div>

    <!-- Camera Settings Modal -->
    <div id="cameraModal" class="modal">
        <div class="modal-content camera-modal">
            <h2>üì∑ Camera Settings</h2>
            <div class="modal-body">
                <div class="settings-columns">
                    <div class="camera-preview-panel">
                        <h3>Live Preview (Raw)</h3>
                        <div class="preview-container">
                            <img id="cameraPreview" src="/api/frame" alt="Camera Preview" />
                        </div>
                        <p class="preview-info">Current video frame</p>
                        
                        <h3>Still Preview (With Processing)</h3>
                        <div class="preview-container">
                            <img id="stillPreview" src="/api/frame-with-still-processing" alt="Still Preview" />
                        </div>
                        <p class="preview-info">How stills will look with current settings</p>
                    </div>
                    <div class="camera-controls-panel">
                        <h3>Adjust Settings</h3>
                        <div class="camera-controls-grid">
                            <div class="control-group">
                                <label for="exposureSlider">Exposure Time (Œºs):</label>
                                <input type="range" id="exposureSlider" min="5000" max="15000" step="500" />
                                <span id="exposureValue">8000</span>
                            </div>

                            <div class="control-group">
                                <label for="gainSlider">Analogue Gain:</label>
                                <input type="range" id="gainSlider" min="1.12" max="8" step="0.1" />
                                <span id="gainValue">1.2</span>
                            </div>

                            <div class="control-group">
                                <label for="brightnessSlider">Brightness:</label>
                                <input type="range" id="brightnessSlider" min="-1" max="1" step="0.1" />
                                <span id="brightnessValue">0</span>
                            </div>

                            <div class="control-group">
                                <label for="contrastSlider">Contrast:</label>
                                <input type="range" id="contrastSlider" min="0.5" max="3" step="0.1" />
                                <span id="contrastValue">1.0</span>
                            </div>

                            <div class="control-group">
                                <label for="saturationSlider">Saturation:</label>
                                <input type="range" id="saturationSlider" min="0.5" max="3" step="0.1" />
                                <span id="saturationValue">1.0</span>
                            </div>

                            <div class="control-group">
                                <label for="awbModeSlider">White Balance Mode:</label>
                                <input type="range" id="awbModeSlider" min="0" max="7" step="1" />
                                <span id="awbModeValue">Auto</span>
                                <small>(0=Off, 1=Auto, 2=Tungsten, 3=Fluorescent, 4=Indoor, 5=Daylight, 6=Cloudy)</small>
                            </div>

                            <div class="control-group">
                                <label for="stillSaturationSlider">Still Saturation (Post-Process):</label>
                                <input type="range" id="stillSaturationSlider" min="0.5" max="2" step="0.1" />
                                <span id="stillSaturationValue">1.0</span>
                            </div>

                            <div class="control-group">
                                <label for="stillContrastSlider">Still Contrast (Post-Process):</label>
                                <input type="range" id="stillContrastSlider" min="0.5" max="2" step="0.1" />
                                <span id="stillContrastValue">1.0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button id="resetCameraSettings" class="btn btn-warning">‚Üª Reset to Default</button>
                <button id="closeCameraSettings" class="btn btn-secondary">‚úì Close</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
